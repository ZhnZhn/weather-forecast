(self.webpackChunkweather_forecast=self.webpackChunkweather_forecast||[]).push([[151],{1561:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>it});var r=n(7280),i=n(731),a=n(7847),l=n(5749),o=n(7154),s=n.n(o),E=n(8129),c=n(4195),m=n(6350),d=n(6880),u=n(5358),y=n(3023),p=n(9009),Z=n(9307),v=n(3872),h=n(1136),I=n(8687);const M={CartesianGrid:c.Z,Bar:m.Z,Line:d.Z,YAxis:u.Z,XAxis:y.Z,ResponsiveContainer:p.Z,Tooltip:Z.Z,Legend:v.Z,ComposedChart:h.Z,LineChart:I.Z};var R=n(3841),T=n(1391),f=Array.isArray;const A=function(e){var t=e.active,n=e.payload;if(t&&f(n))return(n[0]||{}).payload};var C=n(9205);const S={SPEED:"#3f51b5",RAIN:"#0922a5",TEMP_MAX:"#f44336",TEMP_MIN:"#03a9f4",PRESSURE:"#0d2339",SERIA:"#434348",FILTERED:"#9e9e9e"};var P=function(e,t){return void 0===e&&(e="green"),{stroke:e,fill:t||e}},_=function(e){return void 0===e&&(e="green"),{color:e,fontWeight:"bold"}},L={display:"inline-block",color:C.r$.LABEL.color,fontWeight:"bold"};const D={ROOT_DIV:s()({},C.DV.CHART,{padding:8}),LABEL:s()({},L,{width:50}),CAPTION:s()({},L,{paddingRight:4}),ROW:{paddingTop:8},DAY:_(C.r$.DAY.color),CIRCLE_SPEED:P(S.SPEED,"none"),SPEED:_(S.SPEED),CIRCLE_HUMIDITY:P(S.SPEED),HUMIDITY:_(S.SPEED),CIRCLE_RAIN:P(S.RAIN),RECT_RAIN:{stroke:S.RAIN},RAIN:_(S.RAIN),CIRCLE_TEMP_MAX:P(S.TEMP_MAX,"none"),TEMP_MAX:_(S.TEMP_MAX),CIRCLE_TEMP_MIN:P(S.TEMP_MIN,"none"),TEMP_MIN:_(S.TEMP_MIN),CIRCLE_TEMP_MORN:P(C.r$.TEMP_DAY.color,"none"),CIRCLE_TEMP_DAY:P(C.r$.TEMP_DAY.color),TEMP_DAY:_(C.r$.TEMP_DAY.color),CIRCLE_TEMP_EVE:P(C.r$.TEMP_NIGHT.color,"none"),CIRCLE_TEMP_NIGHT:P(C.r$.TEMP_NIGHT.color),TEMP_NIGHT:_(C.r$.TEMP_NIGHT.color),CIRCLE_PRESSURE:P(S.PRESSURE),PRESSURE:_(S.PRESSURE),SERIA:_(S.SERIA),CIRCLE_SERIA:P(S.SERIA),POINTER:{lineHeight:2,cursor:"pointer"},FILTERED:{color:S.FILTERED}};const g=function(e){var t=e.caption,n=e.children;return r.Z.createElement("div",{style:D.ROOT_DIV},r.Z.createElement("div",null,r.Z.createElement("span",{style:D.DAY},t)),n)};var k=function(e){var t=e.t,n=e.v,i=e.style;return r.Z.createElement(r.Z.Fragment,null,r.Z.createElement("span",{style:D.LABEL},t+":"),r.Z.createElement("span",{style:i},function(e){return null==e?"":e}(n)," "))};const x=function(e){var t=e.t1,n=e.v1,i=e.t2,a=e.v2,l=e.style1,o=e.style2;return null==n&&null==a?null:r.Z.createElement("div",{style:D.ROW},r.Z.createElement(k,{t,v:n,style:l}),r.Z.createElement(k,{t:i,v:a,style:o||l}))};const N=function(e){var t=e.t,n=e.v,i=e.style,a=void 0===i?D.SERIA:i;return null==n?null:r.Z.createElement("div",{style:D.ROW},r.Z.createElement("span",{style:D.CAPTION},t+":"),r.Z.createElement("span",{style:a},n))};const b=function(e){var t=A(e);if(!t)return null;var n=e.label,i=t.tempMorn,a=t.tempDay,l=t.tempEve,o=t.tempNight,s=t.tempMin,E=t.tempMax,c=t.rain,m=t.speed,d=t.pressure,u=t.humidity;return r.Z.createElement(g,{caption:n},r.Z.createElement(x,{style1:D.TEMP_DAY,t1:"Morn",v1:i,t2:"Day",v2:a}),r.Z.createElement(x,{style1:D.TEMP_NIGHT,t1:"Eve",v1:l,t2:"Night",v2:o}),r.Z.createElement(x,{t1:"Min",v1:s,style1:D.TEMP_MIN,t2:"Max",v2:E,style2:D.TEMP_MAX}),r.Z.createElement(x,{t1:"Rain",v1:c,style1:D.RAIN,t2:"Wind",v2:m,style2:D.SPEED}),r.Z.createElement(N,{t:"Pressure",v:d,style:D.PRESSURE}),r.Z.createElement(N,{t:"Humidity",v:u,style:D.SPEED}))};var O={SVG:{position:"relative",top:4,display:"inline-block",width:18,height:18}};const Y=function(e){var t=e.stroke,n=e.fill;return r.Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"100%",height:"100%",preserveAspectRatio:"none","aria-labelledby":"title",style:O.SVG},r.Z.createElement("title",{id:"title"},"Circle Marker"),r.Z.createElement("circle",{r:"6",stroke:t,strokeWidth:"2",fill:n,cx:"9",cy:"9"}))};var w={SVG:{position:"relative",top:2,display:"inline-block",width:18,height:18}};const H=function(e){var t=e.stroke,n=void 0===t?"green":t,i=e.fill,a=void 0===i?n:i;return r.Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"100%",height:"100%",preserveAspectRatio:"none","aria-labelledby":"title",style:w.SVG},r.Z.createElement("title",{id:"title"},"Rest Marker"),r.Z.createElement("rect",{x:"3",y:"0",width:"11",height:"18",stroke:n,fill:a}))};var K={paddingLeft:4,paddingRight:4};const U=function(e){var t=e.style,n=e.onClick,i=e.children,a=e.titleStyle,l=e.title,o=void 0===l?"":l;return r.Z.createElement("div",{className:"legend-cell",style:s()({},K,t),onClick:n},i,r.Z.createElement("span",{style:a},o))};var G=Object.assign,X=function(e,t){return e?G({},t,D.POINTER):G({},t,D.POINTER,D.FILTERED)};const W=function(e){var t={};return t.tempMorn=X(e.tempMorn,D.TEMP_DAY),t.tempDay=X(e.tempDay,D.TEMP_DAY),t.tempEve=X(e.tempEve,D.TEMP_NIGHT),t.tempNight=X(e.tempNight,D.TEMP_NIGHT),t.tempMax=X(e.tempMax,D.TEMP_MAX),t.tempMin=X(e.tempMin,D.TEMP_MIN),t.rain=X(e.rain,D.RAIN),t.speed=X(e.speed,D.SPEED),t.pressure=X(e.pressure,D.PRESSURE),t.humidity=X(e.humidity,D.HUMIDITY),t};var $=r.Z.memo,V="tempDay",B="tempNight",F="tempMorn",z="tempEve",j="tempMax",q="tempMin",J="rain",Q="speed",ee="pressure",te="humidity",ne={ROOT_DIV:{marginLeft:"3rem",marginTop:"1rem"},COL_1:{display:"inline-block",marginRight:"1rem"},COL_2:{display:"inline-block"},COL_3:{display:"inline-block",marginLeft:"1rem"}};const re=$((function(e){var t=e.filters,n=e.onFilter,i=W(t);return r.Z.createElement("div",{style:ne.ROOT_DIV},r.Z.createElement("div",{style:ne.COL_1},r.Z.createElement(U,{titleStyle:i.tempMorn,title:"T Morn",onClick:function(){return n(F)}},r.Z.createElement(Y,D.CIRCLE_TEMP_MORN)),r.Z.createElement(U,{titleStyle:i.tempDay,title:"T Day",onClick:function(){return n(V)}},r.Z.createElement(Y,D.CIRCLE_TEMP_DAY))),r.Z.createElement("div",{style:ne.COL_2},r.Z.createElement(U,{titleStyle:i.tempEve,title:"T Eve",onClick:function(){return n(z)}},r.Z.createElement(Y,D.CIRCLE_TEMP_EVE)),r.Z.createElement(U,{titleStyle:i.tempNight,title:"T Night",onClick:function(){return n(B)}},r.Z.createElement(Y,D.CIRCLE_TEMP_NIGHT))),r.Z.createElement("div",{style:ne.COL_3},r.Z.createElement(U,{titleStyle:i.tempMax,title:"T Max",onClick:function(){return n(j)}},r.Z.createElement(Y,D.CIRCLE_TEMP_MAX)),r.Z.createElement(U,{titleStyle:i.tempMin,title:"T Min",onClick:function(){return n(q)}},r.Z.createElement(Y,D.CIRCLE_TEMP_MIN))),r.Z.createElement("div",{style:ne.COL_3},r.Z.createElement(U,{titleStyle:i.rain,title:"Rain",onClick:function(){return n(J)}},r.Z.createElement(H,D.RECT_RAIN)),r.Z.createElement(U,{titleStyle:i.speed,title:"Wind",onClick:function(){return n(Q)}},r.Z.createElement(Y,D.CIRCLE_SPEED))),r.Z.createElement("div",{style:ne.COL_3},r.Z.createElement(U,{titleStyle:i.pressure,title:"Pressure",onClick:function(){return n(ee)}},r.Z.createElement(Y,D.CIRCLE_PRESSURE)),r.Z.createElement(U,{titleStyle:i.humidity,title:"Humidity",onClick:function(){return n(te)}},r.Z.createElement(Y,D.CIRCLE_HUMIDITY))))}),(function(e,t){return e.filters===t.filters}));var ie=function(e){var t=e.stroke,n=e.fill,r=void 0===n?t:n,i=e.dash;return{type:"monotone",stroke:t,strokeWidth:2,strokeDasharray:void 0===i?null:i,dot:{r:6,strokeWidth:2,strokeDasharray:null,stroke:t,fill:r},activeDot:{r:10,strokeWidth:2,strokeDasharray:null,stroke:t,fill:r}}},ae=function(e){return{axisLine:{stroke:e},tickLine:{stroke:e},tick:{stroke:e,fill:e}}};const le={ComposedChart:{margin:{top:20,right:10,bottom:30,left:-20}},HourlyChart:{margin:{top:20,right:10,bottom:30,left:20}},XAxis:{tickSize:16,tick:{stroke:C.r$.DAY.color,fill:C.r$.DAY.color}},YAxisSpeed:ae(S.SPEED),YAxisRain:ae(S.RAIN),YAxisPressure:ae(S.PRESSURE),CartesianGrid:{stroke:"#555",vertical:!1},LinePressure:ie({stroke:S.PRESSURE,dash:"5 5"}),LineRain:ie({stroke:S.RAIN,dash:"5 5"}),LineSpeed:ie({stroke:S.SPEED,fill:"#808080",dash:"5 5"}),LineHumidity:ie({stroke:S.SPEED}),LineTempMax:ie({stroke:S.TEMP_MAX,fill:"#808080",dash:"5 5"}),LineTempMin:ie({stroke:S.TEMP_MIN,fill:"#808080",dash:"5 5"}),LineTempMorn:ie({stroke:C.r$.TEMP_DAY.color,fill:"#808080",dash:"5 5"}),LineTempDay:ie({stroke:C.r$.TEMP_DAY.color}),LineTempEve:ie({stroke:C.r$.TEMP_NIGHT.color,fill:"#808080",dash:"5 5"}),LineTempNight:ie({stroke:C.r$.TEMP_NIGHT.color})};var oe=r.Z.useState,se=r.Z.useCallback,Ee=r.Z.useMemo,ce=r.Z.memo,me=M.CartesianGrid,de=M.Bar,ue=M.Line,ye=M.YAxis,pe=M.XAxis,Ze=M.ResponsiveContainer,ve=M.Tooltip,he=M.Legend,Ie=M.ComposedChart,Me={tempDay:!0,tempNight:!1,tempMorn:!1,tempEve:!1,tempMax:!1,tempMin:!1,rain:!1,speed:!1,pressure:!1,humidity:!1},Re=[{day:"01 SU",tempDay:35},{day:"02 MO",tempDay:30},{day:"03 TU",tempDay:20},{day:"04 WE",tempDay:27},{day:"05 TH",tempDay:18},{day:"06 FR",tempDay:23},{day:"07 SA",tempDay:34}];const Te=ce((function(){var e=oe(Me),t=e[0],n=e[1],i=se((function(e){n((function(t){return t[e]=!t[e],s()({},t)}))}),[]),a=(0,E.useSelector)((function(e){var t=T.OU.recent(e);return t?T.OU.listById(e,t):void 0})),l=Ee((function(){return a?(void 0===(e=a)&&(e=[]),e.map((function(e){var t=e.dt,n=e.rain,r=void 0===n?0:n,i=e.speed,a=e.temp,l=e.pressure,o=e.humidity,s=a||{},E=s.day,c=void 0===E?null:E,m=s.night,d=void 0===m?null:m,u=s.morn,y=void 0===u?null:u,p=s.eve,Z=void 0===p?null:p,v=s.max,h=void 0===v?null:v,I=s.min,M=void 0===I?null:I;return{day:R.Z.toShortDayOfWeek(t),tempDay:c,tempNight:d,tempMorn:y,tempEve:Z,tempMax:h,tempMin:M,rain:r,speed:i,pressure:l,humidity:o}}))):Re;var e}),[a]),o=Ee((function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var n=Object.keys(t);return e.map((function(e){var r=s()({},e);return n.forEach((function(e){t[e]||(r[e]=null)})),r}))}(l,t)}),[l,t]);return r.Z.createElement(Ze,{width:"100%",height:300},r.Z.createElement(Ie,s()({},le.ComposedChart,{data:o}),r.Z.createElement(pe,s()({dataKey:"day"},le.XAxis)),r.Z.createElement(ye,{yAxisId:1,label:{value:"°C"}}),r.Z.createElement(ye,s()({},le.YAxisRain,{yAxisId:2,hide:!t.rain,dataKey:"rain",orientation:"right",label:"mm"})),r.Z.createElement(ye,s()({},le.YAxisSpeed,{hide:!t.speed,yAxisId:3,dataKey:"speed",orientation:"right",label:"m/s"})),r.Z.createElement(ye,s()({},le.YAxisPressure,{hide:!t.pressure,yAxisId:4,dataKey:"pressure",width:80,orientation:"right",label:"hPa",type:"number",domain:["dataMin","dataMax"]})),r.Z.createElement(ye,s()({},le.YAxisSpeed,{hide:!t.humidity,yAxisId:5,dataKey:"humidity",orientation:"right",label:"%"})),r.Z.createElement(me,le.CartesianGrid),r.Z.createElement(ve,{offset:24,content:r.Z.createElement(b,{data:l})}),r.Z.createElement(he,{content:r.Z.createElement(re,{filters:t,onFilter:i})}),r.Z.createElement(de,{yAxisId:2,dataKey:"rain",barSize:20,fill:S.RAIN}),r.Z.createElement(ue,s()({},le.LineSpeed,{yAxisId:3,dataKey:"speed"})),r.Z.createElement(ue,s()({},le.LinePressure,{yAxisId:4,dataKey:"pressure"})),r.Z.createElement(ue,s()({},le.LineHumidity,{yAxisId:5,dataKey:"humidity"})),r.Z.createElement(ue,s()({},le.LineTempMin,{yAxisId:1,dataKey:"tempMin"})),r.Z.createElement(ue,s()({},le.LineTempMax,{yAxisId:1,dataKey:"tempMax"})),r.Z.createElement(ue,s()({},le.LineTempEve,{yAxisId:1,dataKey:"tempEve"})),r.Z.createElement(ue,s()({},le.LineTempMorn,{yAxisId:1,dataKey:"tempMorn"})),r.Z.createElement(ue,s()({},le.LineTempNight,{yAxisId:1,dataKey:"tempNight"})),r.Z.createElement(ue,s()({},le.LineTempDay,{yAxisId:1,dataKey:"tempDay"}))))}),(function(){return!0}));var fe={ROOT:{marginTop:"1rem"},ITEM:{display:"inline-block",marginRight:"1rem",paddingLeft:4,paddingRight:4,paddingBottom:4}},Ae=function(e,t){return e?t:s()({},t,D.FILTERED)};const Ce=function(e){var t=e.filtered,n=e.onFilter,i=Ae(!t.temp,D.SERIA),a=Ae(!t.pressure,D.PRESSURE),l=Ae(!t.rain,D.RAIN),o=Ae(!t.speed,D.SPEED);return r.Z.createElement("div",{style:fe.ROOT},r.Z.createElement(U,{style:fe.ITEM,titleStyle:i,title:"T",onClick:function(){return n("temp")}},r.Z.createElement(Y,D.CIRCLE_SERIA)),r.Z.createElement(U,{style:fe.ITEM,titleStyle:a,title:"Pressure",onClick:function(){return n("pressure")}},r.Z.createElement(Y,D.CIRCLE_PRESSURE)),r.Z.createElement(U,{style:fe.ITEM,titleStyle:l,title:"Rain",onClick:function(){return n("rain")}},r.Z.createElement(H,D.RECT_RAIN)),r.Z.createElement(U,{style:fe.ITEM,titleStyle:o,title:"Wind",onClick:function(){return n("speed")}},r.Z.createElement(Y,D.CIRCLE_SPEED)))};const Se=function(e){var t=A(e);if(!t)return null;var n=t.dt_text,i=t.temp,a=t.pressure,l=t.rain,o=t.speed;return r.Z.createElement(g,{caption:n},r.Z.createElement(N,{t:"Temp",v:i}),r.Z.createElement(N,{t:"Pressure",v:a,style:D.PRESSURE}),r.Z.createElement(N,{t:"Speed",v:o,style:D.SPEED}),r.Z.createElement(N,{t:"Rain",v:l,s:D.RAIN}))};var Pe=r.Z.useState,_e=r.Z.useCallback,Le=r.Z.useMemo,De=r.Z.memo,ge=M.CartesianGrid,ke=M.Line,xe=M.Bar,Ne=M.YAxis,be=M.XAxis,Oe=M.ResponsiveContainer,Ye=M.Legend,we=M.ComposedChart,He=M.Tooltip,Ke=Array.isArray,Ue={temp:!1,pressure:!0,rain:!0,speed:!0},Ge=[{day:"01 08",temp:35},{day:"02 20",temp:30},{day:"03 08",temp:20},{day:"04 20",temp:27},{day:"05 08",temp:18},{day:"06 20",temp:23},{day:"07 08",temp:34}],Xe=function(e,t){return e[t]?"empty":t};const We=De((function(){var e=Pe(Ue),t=e[0],n=e[1],i=_e((function(e){n((function(t){return t[e]=!t[e],s()({},t)}))}),[]),a=(0,E.useSelector)((function(e){return T.LL.forecast(e)})),l=Le((function(){return Ke(a)?function(e){return e.map((function(e){var t=e.dt,n=e.main,r=e.wind,i=e.rain,a=n||{},l=a.temp,o=a.pressure,s=a.humidity,E=(r||{}).speed,c=void 0===E?null:E,m=(i||{})["3h"]||null,d=R.Z.toDayHour(t);return{day:d,dt_text:d+":00",temp:l,pressure:o,humidity:s,speed:c,rain:m}}))}(a):Ge}),[a]);return r.Z.createElement(Oe,{width:"100%",height:300},r.Z.createElement(we,s()({data:l},le.HourlyChart),r.Z.createElement(be,s()({dataKey:"day"},le.XAxis)),r.Z.createElement(Ne,{yAxisId:1,orientation:"right",width:45,label:"°C",dataKey:"temp",hide:t.temp}),r.Z.createElement(Ne,s()({yAxisId:2,orientation:"right",width:80,dataKey:"pressure",type:"number",domain:["dataMin","dataMax"],label:"hPa",hide:t.pressure},le.YAxisPressure)),r.Z.createElement(Ne,s()({yAxisId:3,orientation:"right",width:54,label:"mm",dataKey:"rain",hide:t.rain},le.YAxisRain)),r.Z.createElement(Ne,s()({yAxisId:4,orientation:"right",width:45,label:"m/s",dataKey:"speed",hide:t.speed},le.YAxisSpeed)),r.Z.createElement(ge,le.CartesianGrid),r.Z.createElement(He,{offset:24,content:r.Z.createElement(Se,{data:l})}),r.Z.createElement(Ye,{content:r.Z.createElement(Ce,{filtered:t,onFilter:i})}),r.Z.createElement(ke,s()({},le.LineTempNight,{connectNulls:!0,yAxisId:1,dataKey:Xe(t,"temp")})),r.Z.createElement(ke,s()({},le.LinePressure,{connectNulls:!0,strokeDasharray:"5 5",yAxisId:2,dataKey:Xe(t,"pressure")})),r.Z.createElement(xe,{dataKey:Xe(t,"rain"),yAxisId:3,barSize:20,fill:"#0922a5"}),r.Z.createElement(ke,s()({connectNulls:!0},le.LineSpeed,{strokeDasharray:"5 5",yAxisId:4,dataKey:Xe(t,"speed")}))))}),(function(){return!0}));const $e=function(e){var t=A(e);if(!t)return null;var n=t.day,i=t.uvi;return r.Z.createElement(g,{caption:n+":00"},r.Z.createElement(N,{t:"UV index",v:i}))};var Ve=r.Z.useMemo,Be=M.CartesianGrid,Fe=M.Line,ze=M.YAxis,je=M.XAxis,qe=M.ResponsiveContainer,Je=M.LineChart,Qe=M.Tooltip;const et=function(){var e=(0,E.useSelector)(T.yw.forecast),t=Ve((function(){return(e||[]).map((function(e){var t=e.date,n=e.value;return{day:R.Z.toDayHour(t),uvi:n}}))}),[e]);return r.Z.createElement(qe,{width:"100%",height:300},r.Z.createElement(Je,s()({data:t},le.HourlyChart),r.Z.createElement(je,s()({dataKey:"day"},le.XAxis)),r.Z.createElement(ze,{yAxisId:1,orientation:"right",width:45,dataKey:"uvi"}),r.Z.createElement(Be,le.CartesianGrid),r.Z.createElement(Qe,{offset:24,content:r.Z.createElement($e,{data:t})}),r.Z.createElement(Fe,s()({},le.LineTempNight,{connectNulls:!0,yAxisId:1,dataKey:"uvi"}))))};var tt=i.Z.requestHourly,nt=i.Z.requestUvi,rt={TABS:{textAlign:"left"}};const it=function(){return r.Z.createElement(a.Z,{key:"1",width:"100%",tabsStyle:rt.TABS},r.Z.createElement(l.Z,{title:"7 Days"},r.Z.createElement(Te,null)),r.Z.createElement(l.Z,{title:"5 Days/3 Hours",onClick:tt},r.Z.createElement(We,null)),r.Z.createElement(l.Z,{title:"UV index",onClick:nt},r.Z.createElement(et,null)))}}}]);