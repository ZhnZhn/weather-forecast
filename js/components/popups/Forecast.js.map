{"version":3,"sources":["../../../src/components/popups/Forecast.jsx"],"names":["Component","NOT_FOUND_MSG","OK_CODE","INIT_STATE","forecast","cod","list","Forecast","state","_onStore","store","props","getState","recent","setState","byId","_renderMsg","unsubscribe","subscribe","rootStyle","theme","_style","createStyle","Object","assign","ROOT_DIV","marginRight"],"mappings":";;;;;;;;AACA;;;;AAGA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;+eAVA;;AAEA;;IAUQA,S,mBAAAA,S;;;AAER,IAAMC,gBAAgB,8BAAtB;AACA,IAAMC,UAAU,KAAhB;;AAEA,IAAMC,aAAa;AACjBC,YAAW;AACTC,SAAM,GADG;AAETC,UAAO;AAFE;AADM,CAAnB;;IAOMC,Q;;;;;;;;;;;;;;0LAOJC,K,GAAQL,U,QAORM,Q,GAAW,YAAM;AACT,UAAEC,KAAF,GAAY,MAAKC,KAAjB,CAAED,KAAF;AAAA,UACJF,KADI,GACIE,MAAME,QAAN,EADJ;AAAA,UAEJC,MAFI,GAEK,qBAAUA,MAAV,CAAiBL,KAAjB,CAFL;;AAGN,UAAIK,UAAU,MAAKA,MAAL,KAAgBA,MAA9B,EAAsC;AACpC,cAAKC,QAAL,CAAc;AACZV,oBAAW,qBAAUW,IAAV,CAAeP,KAAf,EAAsBK,MAAtB;AADC,SAAd;AAGD;AACF,K,QAMDG,U,GAAa,YAAM;AACjB,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAOf;AAAP;AADF,OADF;AAKD,K;;AAlCD;;;;;;;;wCAQmB;AAAA,UACRS,KADQ,GACE,KAAKC,KADP,CACRD,KADQ;;AAEhB,WAAKO,WAAL,GAAmBP,MAAMQ,SAAN,CAAgB,KAAKT,QAArB,CAAnB;AACF;;;2CAaqB;AACpB,WAAKQ,WAAL;AACD;;;6BAUO;AAAA,mBAC8B,KAAKN,KADnC;AAAA,UACEQ,SADF,UACEA,SADF;AAAA,UACaT,KADb,UACaA,KADb;AAAA,UACoBU,KADpB,UACoBA,KADpB;AAAA,UAEEhB,QAFF,GAEe,KAAKI,KAFpB,CAEEJ,QAFF;AAAA,UAGEC,GAHF,GAGUD,QAHV,CAGEC,GAHF;AAAA,UAIAgB,MAJA,GAISD,MAAME,WAAN,oBAJT;;AAMN,aACE;AAAA;AAAA;AACI,qBAAWC,OAAOC,MAAP,CAAcL,SAAd,EAAyBE,OAAOI,QAAhC,CADf;AAEI,iBAAOf,KAFX;AAGI,oBAAS,iBAHb;AAII,kBAAQ;AAJZ;AAME;AACI,oBAAUN,QADd;AAEI,wBAAc,EAAEsB,aAAa,MAAf;AAFlB,UANF;AAUK,aAAGrB,GAAJ,KAAaH,OAAb,IAAwB,KAAKc,UAAL;AAV5B,OADF;AAcD;;;;EAzDoBhB,S;;kBA4DR,yBAAUO,QAAV,C","file":"Forecast.js","sourcesContent":["//import React, { Component } from 'react';\r\nimport React from '../_react'\r\n//import PropTypes from 'prop-types';\r\n\r\nimport { sForecast } from '../../flux/selectors';\r\n\r\nimport FlyPopup from '../containers/FlyPopup';\r\nimport PeriodForecast from '../views/PeriodForecast';\r\n\r\nimport styleConfig from './Forecast.Style';\r\nimport withTheme from '../hoc/withTheme';\r\n\r\nconst { Component } = React\r\n\r\nconst NOT_FOUND_MSG = 'Forecast for place not found';\r\nconst OK_CODE = '200'\r\n\r\nconst INIT_STATE = {\r\n  forecast : {\r\n    cod : 200,\r\n    list : []\r\n  }\r\n}\r\n\r\nclass Forecast extends Component {\r\n  /*\r\n  static propTypes = {\r\n    store: PropTypes.object\r\n  }\r\n  */\r\n\r\n  state = INIT_STATE\r\n\r\n  componentDidMount(){\r\n     const { store } = this.props\r\n     this.unsubscribe = store.subscribe(this._onStore)\r\n  }\r\n\r\n  _onStore = () => {\r\n    const { store } = this.props\r\n    , state = store.getState()\r\n    , recent = sForecast.recent(state)\r\n    if (recent && this.recent !== recent ){\r\n      this.setState({\r\n        forecast : sForecast.byId(state, recent)\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this.unsubscribe();\r\n  }\r\n\r\n  _renderMsg = () => {\r\n    return (\r\n      <div>\r\n        <span>{NOT_FOUND_MSG}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render(){\r\n    const { rootStyle, store, theme } = this.props\r\n        , { forecast } = this.state\r\n        , { cod } = forecast\r\n        , _style = theme.createStyle(styleConfig);\r\n\r\n    return (\r\n      <FlyPopup\r\n          rootStyle={Object.assign(rootStyle, _style.ROOT_DIV)}\r\n          store={store}\r\n          storeKey=\"isPopupForecast\"\r\n          isShow={true}\r\n       >\r\n        <PeriodForecast\r\n            forecast={forecast}\r\n            captionStyle={{ marginRight: '30px' }}\r\n        />\r\n        { (''+cod) !== OK_CODE && this._renderMsg() }\r\n      </FlyPopup>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withTheme(Forecast)\r\n"]}