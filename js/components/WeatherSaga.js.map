{"version":3,"sources":["../../src/components/WeatherSaga.jsx"],"names":["Component","React","MAP_ID","PUSH_MENU_ID","S","HEADER","width","height","lineHeight","borderBottom","cursor","MAP","FLY_ROOT_DIV","position","top","left","padding","backgroundColor","border","borderRadius","boxShadow","zIndex","WeatherSaga","props","_onStore","store","layout","getState","isPushMenu","mapEl","style","transform","menuEl","getBoundingClientRect","themeName","forceUpdate","_refMap","n","_mapComp","componentDidMount","unsubsribe","subscribe","document","getElementById","componentWillUnmount","unsubscribe","render","theme"],"mappings":"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","sourcesContent":["import React from './_react'\r\n//import PropTypes from 'prop-types';\r\n\r\nimport ThemeContext from './hoc/ThemeContext'\r\nimport theme from './styles/theme';\r\nimport ModalDialogContainer from './containers/ModalDialogContainer'\r\nimport Header from './header/Header';\r\nimport LeftPushMenu from './left-push-menu/LeftPushMenu';\r\nimport LeafletMap from './maps/LeafletMap';\r\nimport PopupForecast from './popups/Forecast';\r\n\r\nconst { Component } = React\r\n\r\nconst MAP_ID = 'map_id';\r\nconst PUSH_MENU_ID = 'left_push_menu';\r\n\r\nconst S = {\r\n  HEADER : {\r\n     width:'100%',\r\n     height: '3rem',\r\n     lineHeight: '3rem',\r\n     borderBottom: '1px solid #999',\r\n     cursor: 'auto'\r\n  },\r\n  MAP: {\r\n    width: '100%',\r\n    height: 'calc(100vh - 3rem)'\r\n  },\r\n  FLY_ROOT_DIV : {\r\n    position: 'absolute',\r\n    top: '30px',\r\n    left: '50px',\r\n    padding: '10px 5px 5px 4px',\r\n    backgroundColor: '#808080',\r\n    border: '1px solid #999',\r\n    borderRadius: '5px',\r\n    boxShadow: 'rgba(0, 0, 0, 0.2) 0px 0px 0px 12px',\r\n    zIndex: 500\r\n  }\r\n};\r\n\r\n\r\nclass WeatherSaga extends Component{\r\n  /*\r\n  static propTypes = {\r\n    store: PropTypes.object\r\n  }\r\n  */\r\n\r\n  constructor(props){\r\n    super(props)\r\n    const layout = props.store.getState().layout;\r\n    this.layout = layout;\r\n    this.isPushMenu = layout.isPushMenu\r\n    this.themeName = layout.themeName\r\n  }\r\n  componentDidMount(){\r\n    this.unsubsribe = this.props.store.subscribe(this._onStore)\r\n    this.mapEl = document.getElementById(MAP_ID)\r\n    this.menuEl = document.getElementById(PUSH_MENU_ID)\r\n  }\r\n  _onStore = () => {\r\n    const { store } = this.props\r\n        , layout = store.getState().layout;\r\n    if (layout !== this.layout){\r\n      if (layout.isPushMenu !== this.isPushMenu){\r\n         if (this.isPushMenu){\r\n\r\n           this.mapEl.style.transform = 'translateX(0px)'\r\n           this.mapEl.style.width = '100vw'\r\n           this.menuEl.style.transform = `translateX(-100%)`\r\n\r\n         } else {\r\n           const width = this.menuEl.getBoundingClientRect().width\r\n           this.mapEl.style.transform = `translateX(${width}px)`\r\n           this.mapEl.style.width = `calc(100vw - ${width}px)`\r\n           this.menuEl.style.transform = 'translateX(0px)'\r\n         }\r\n         this.isPushMenu = layout.isPushMenu\r\n      } else if ( layout.themeName !== this.themeName){\r\n        //console.log('WeatherSaga forceUpdate')\r\n        this.forceUpdate()\r\n        this.themeName = layout.themeName\r\n      }\r\n      this.layout = layout\r\n    }\r\n  }\r\n  componentWillUnmount(){\r\n    this.unsubscribe()\r\n  }\r\n\r\n  _refMap = n => this._mapComp = n\r\n\r\n  render(){\r\n    const { store } = this.props;\r\n    return (\r\n      <ThemeContext.Provider value={theme} >\r\n        <div>\r\n          <ModalDialogContainer\r\n            store={store}\r\n          />\r\n          <Header\r\n             rootStyle={S.HEADER}\r\n             store={store}\r\n          />\r\n          <div>\r\n            <LeftPushMenu\r\n               id={PUSH_MENU_ID}\r\n               store={store}\r\n            />\r\n            <LeafletMap\r\n                id={MAP_ID}\r\n                rootStyle={S.MAP}\r\n                store={store}\r\n            />\r\n            <PopupForecast\r\n               rootStyle={S.FLY_ROOT_DIV}\r\n               isShow={true}\r\n               store={store}\r\n            />\r\n          </div>\r\n        </div>\r\n      </ThemeContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WeatherSaga\r\n"],"file":"WeatherSaga.js"}