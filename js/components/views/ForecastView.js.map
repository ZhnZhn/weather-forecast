{"version":3,"sources":["../../../src/components/views/ForecastView.jsx"],"names":["NOT_FOUND_MSG","OK_CODE","Component","ForecastView","state","forecast","cod","list","_onStore","store","props","getState","recent","setState","_renderForecast","map","item","index","_renderMsg","isFixed","makeDragable","domRootDiv","unsubscribe","subscribe","isShow","rootStyle","_styleShow","display","_classShow","undefined","c","Object","assign"],"mappings":";;;;;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;+eANA;;;AAQA,IAAMA,gBAAgB,8BAAtB;AACA,IAAMC,UAAU,KAAhB;;IAEQC,S,mBAAAA,S;;IAEFC,Y;;;;;;;;;;;;;;kMAEJC,K,GAAQ;AACNC,gBAAW;AACTC,aAAM,GADG;AAETC,cAAO;AAFE;AADL,K,QAeRC,Q,GAAW,YAAM;AACT,UAAEC,KAAF,GAAY,MAAKC,KAAjB,CAAED,KAAF;AAAA,4BACcA,MAAME,QAAN,EADd;AAAA,kDACFN,QADE;AAAA,UACFA,QADE,yCACO,EADP;AAAA,UAEFO,MAFE,GAESP,QAFT,CAEFO,MAFE;;AAGN,UAAIA,UAAU,MAAKA,MAAL,KAAgBA,MAA9B,EAAsC;AACpC,cAAKC,QAAL,CAAc;AACXR,oBAAWA,SAASO,MAAT;AADA,SAAd;AAGD;AACF,K,QAEDE,e,GAAkB,YAAM;AAChB,UAAET,QAAF,GAAe,MAAKD,KAApB,CAAEC,QAAF;AAAA,2BACUA,QADV,CACFE,IADE;AAAA,UACFA,IADE,kCACG,EADH;;AAEN,aAAOA,KAAKQ,GAAL,CAAS,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC9B,eAAQ,mDAAS,KAAKA,KAAd,EAAqB,MAAMD,IAA3B,GAAR;AACF,OAFM,CAAP;AAGD,K,QAEDE,U,GAAa,YAAM;AACjB,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAOlB;AAAP;AADF,OADF;AAKD,K;;;;;wCAjCkB;AAAA,mBACW,KAAKU,KADhB;AAAA,UACRD,KADQ,UACRA,KADQ;AAAA,UACDU,OADC,UACDA,OADC;;AAEhB,UAAI,CAACA,OAAL,EAAa;AACX,2BAASC,YAAT,CAAsB,KAAKC,UAA3B;AACD;AACD,WAAKC,WAAL,GAAmBb,MAAMc,SAAN,CAAgB,KAAKf,QAArB,CAAnB;AACF;;;6BA6BO;AAAA;;AAAA,oBACwB,KAAKE,KAD7B;AAAA,UACEc,MADF,WACEA,MADF;AAAA,UACUC,SADV,WACUA,SADV;AAAA,UAEJC,UAFI,GAESF,SAAS,EAACG,SAAS,OAAV,EAAT,GAA8B,EAACA,SAAS,MAAV,EAFvC;AAAA,UAGJC,UAHI,GAGSJ,SAAS,YAAT,GAAwBK,SAHjC;AAAA,UAIFxB,QAJE,GAIW,KAAKD,KAJhB,CAIFC,QAJE;AAAA,UAKFC,GALE,GAKMD,QALN,CAKFC,GALE;;AAON,aACE;AAAA;AAAA;AACK,eAAM;AAAA,mBAAK,OAAKe,UAAL,GAAkBS,CAAvB;AAAA,WADX;AAEK,qBAAWF,UAFhB;AAGK,iBAAOG,OAAOC,MAAP,CAAc,EAAd,EAAkBP,SAAlB,EAA6BC,UAA7B;AAHZ;AAKE,2DAAS,UAAUrB,QAAnB,GALF;AAME;AAAA;AAAA;AACG,eAAKS,eAAL;AADH,SANF;AASK,aAAGR,GAAJ,KAAaL,OAAb,IAAwB,KAAKiB,UAAL;AAT5B,OADF;AAaD;;;;EAhEwBhB,S;;kBAmEZC,Y","file":"ForecastView.js","sourcesContent":["//import React, { Component } from 'react';\r\nimport React from '../_react'\r\n\r\nimport Interact from '../../utils/Interact';\r\n\r\nimport Caption from './Caption';\r\nimport DayItem from './DayItem';\r\n\r\nconst NOT_FOUND_MSG = 'Forecast for place not found';\r\nconst OK_CODE = '200'\r\n\r\nconst { Component } = React\r\n\r\nclass ForecastView extends Component {\r\n\r\n  state = {\r\n    forecast : {\r\n      cod : 200,\r\n      list : []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n     const { store, isFixed } = this.props\r\n     if (!isFixed){\r\n       Interact.makeDragable(this.domRootDiv);\r\n     }\r\n     this.unsubscribe = store.subscribe(this._onStore)\r\n  }\r\n\r\n  _onStore = () => {\r\n    const { store } = this.props\r\n    , { forecast={} } = store.getState()\r\n    , { recent } = forecast;\r\n    if (recent && this.recent !== recent ){\r\n      this.setState({\r\n         forecast : forecast[recent]\r\n      })\r\n    }\r\n  }\r\n\r\n  _renderForecast = () => {\r\n    const { forecast } = this.state\r\n    , { list=[] } = forecast\r\n    return list.map((item, index) => {\r\n       return (<DayItem key={index} item={item} />)\r\n    })\r\n  }\r\n\r\n  _renderMsg = () => {\r\n    return (\r\n      <div>\r\n        <span>{NOT_FOUND_MSG}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render(){\r\n    const { isShow, rootStyle } = this.props\r\n    , _styleShow = isShow ? {display: 'block'} : {display: 'none'}\r\n    , _classShow = isShow ? 'show-popup' : undefined\r\n    , { forecast } = this.state\r\n    , { cod } = forecast ;\r\n\r\n    return (\r\n      <div\r\n           ref={ c => this.domRootDiv = c }\r\n           className={_classShow}\r\n           style={Object.assign({}, rootStyle, _styleShow)}\r\n      >\r\n        <Caption forecast={forecast} />\r\n        <div>\r\n          {this._renderForecast()}\r\n        </div>\r\n        { (''+cod) !== OK_CODE && this._renderMsg() }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForecastView;\r\n"]}