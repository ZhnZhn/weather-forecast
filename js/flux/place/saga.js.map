{"version":3,"sources":["../../../src/flux/place/saga.js"],"names":["takeEvery","effects","call","put","requestPlace","action","_is","payload","lat","lot","request","api","crForecast","forecast","place","requestedOk","modal","showModal","errMsg","message","watchPlaceRequested","A","PLACE_REQUESTED"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;IAGEA,S,GAEEC,kB,CAFFD,S;IACAE,I,GACED,kB,CADFC,I;IAAMC,G,GACJF,kB,CADIE,G;;AAGR,IAAMC,YAAY;AAAA;AAAA,6BAAG,SAAfA,YAAe,CAAWC,MAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEL,wCAAO,oBAAP;;AAFK;AAEXC,UAAAA,GAFW;;AAAA,eAGbA,GAHa;AAAA;AAAA;AAAA;;AAAA,4BAIQD,MAJR,CAIPE,OAJO,EAIPA,OAJO,gCAIC,EAJD;AAKPC,UAAAA,GALO,GAKMD,OALN,CAKPC,GALO,EAKFC,GALE,GAKMF,OALN,CAKFE,GALE;AAAA;AAME,iBAAMP,IAAI,CAACQ,mBAAD,EAAUC,wBAAIC,UAAJ,CAAeJ,GAAf,EAAoBC,GAApB,CAAV,CAAV;;AANF;AAMTI,UAAAA,QANS;AAAA;AAOf,iBAAMV,GAAG,CAACW,oBAAMC,WAAN,CAAkBF,QAAlB,CAAD,CAAT;;AAPe;AAAA;AAAA;;AAAA;AAAA;AASf,iBAAMV,GAAG,CAACa,qBAAMC,SAAN,CAAgB,UAAhB,CAAD,CAAT;;AATe;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAYjB,iBAAMd,GAAG,CAACa,qBAAMC,SAAN,CAAgB,OAAhB,EAAyB;AAChCC,YAAAA,MAAM,EAAE,YAAIC;AADoB,WAAzB,CAAD,CAAT;;AAZiB;AAAA;AAAA;AAAA;AAAA;AAAA,KAAff,YAAe;AAAA,CAAH,CAAlB;;AAmBA,IAAMgB,mBAAmB;AAAA;AAAA,6BAAG,SAAtBA,mBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AACzB,iBAAMpB,SAAS,CAACqB,gBAAEC,eAAH,EAAoBlB,YAApB,CAAf;;AADyB;AAAA;AAAA;AAAA;AAAA;AAAA,KAAtBgB,mBAAsB;AAAA,CAAH,CAAzB;;eAIeA,mB","sourcesContent":["import { effects } from 'redux-saga'\r\nimport { isApiKey } from '../gen'\r\nimport api from '../../api/OpenWeather'\r\nimport place, { ACTION as A } from './actions'\r\nimport modal from '../modal/actions'\r\nimport request from '../../affects/request'\r\n\r\nconst {\r\n  takeEvery,\r\n  call, put\r\n} = effects;\r\n\r\nconst requestPlace = function* (action){\r\n  try {\r\n    const _is = yield* isApiKey()\r\n    if (_is) {\r\n      const { payload={} } = action;\r\n      const { lat, lot } = payload;\r\n      const forecast = yield call(request, api.crForecast(lat, lot))\r\n      yield put(place.requestedOk(forecast))\r\n    } else {\r\n      yield put(modal.showModal('SETTINGS'))\r\n    }\r\n  } catch(err){\r\n    yield put(modal.showModal('ERROR', {\r\n       errMsg: err.message\r\n    }))\r\n  }\r\n}\r\n\r\n\r\nconst watchPlaceRequested = function* (){\r\n   yield takeEvery(A.PLACE_REQUESTED, requestPlace)\r\n}\r\n\r\nexport default watchPlaceRequested\r\n"],"file":"saga.js"}