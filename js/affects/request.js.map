{"version":3,"sources":["../../src/affects/request.js"],"names":["MSG","HTTP_STATUS","NETWORK","request","url","fetch","then","res","status","Promise","all","json","resolve","arr","message","Error","err","indexOf"],"mappings":";;;;AACA,IAAMA,GAAG,GAAG;AACVC,EAAAA,WAAW,EAAE,aADH;AAEVC,EAAAA,OAAO,EAAE;AAFC,CAAZ;;AAKA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAS;AACvB,SAAOC,KAAK,CAACD,GAAD,CAAL,CACJE,IADI,CACC,UAAAC,GAAG,EAAI;AAAA,QACFC,MADE,GACSD,GADT,CACFC,MADE;AAEV,WAAOC,OAAO,CAACC,GAAR,CAAY,CAChBH,GAAG,CAACI,IAAJ,EADgB,EAEhBF,OAAO,CAACG,OAAR,CAAgBJ,MAAhB,CAFgB,CAAZ,CAAP;AAIF,GAPI,EAQJF,IARI,CAQC,UAAAO,GAAG,EAAI;AACX,QAAMF,IAAI,GAAGE,GAAG,CAAC,CAAD,CAAhB;AAAA,QACML,MAAM,GAAGK,GAAG,CAAC,CAAD,CADlB;;AAEA,QAAIL,MAAM,IAAG,GAAT,IAAgBA,MAAM,GAAE,GAA5B,EAAiC;AAC/B,aAAOG,IAAP;AACD,KAFD,MAEO,IAAIH,MAAM,IAAE,GAAR,IAAeA,MAAM,GAAC,GAA1B,EAA+B;AAAA,UAC5BM,OAD4B,GAChBH,IADgB,CAC5BG,OAD4B;AAEpC,YAAM,IAAIC,KAAJ,CAAaf,GAAG,CAACC,WAAjB,UAAiCO,MAAjC,UAA4CM,OAA5C,CAAN;AACD,KAHM,MAGA;AACL,YAAM,IAAIC,KAAJ,CAAaf,GAAG,CAACC,WAAjB,UAAiCO,MAAjC,CAAN;AACD;AACF,GAnBI,WAoBE,UAAAQ,GAAG,EAAI;AAAA,uBACWA,GADX,CACJF,OADI;AAAA,QACJA,OADI,6BACI,EADJ;;AAEZ,QAAIA,OAAO,CAACG,OAAR,CAAgBjB,GAAG,CAACC,WAApB,MAAqC,CAAC,CAA1C,EAA6C;AAC3C,YAAM,IAAIc,KAAJ,CAAUD,OAAV,CAAN;AACD;;AACD,UAAM,IAAIC,KAAJ,CAAaf,GAAG,CAACE,OAAjB,SAA4BY,OAA5B,CAAN;AACD,GA1BI,CAAP;AA2BD,CA5BD;;eA+BeX,O","sourcesContent":["\r\nconst MSG = {\r\n  HTTP_STATUS: 'HTTP Status',\r\n  NETWORK: 'Loading error. Please, check your network connection.'\r\n};\r\n\r\nconst request = (url) => {\r\n  return fetch(url)\r\n    .then(res => {\r\n       const { status } = res;\r\n       return Promise.all([\r\n          res.json(),\r\n          Promise.resolve(status)\r\n       ])\r\n    })\r\n    .then(arr => {\r\n      const json = arr[0]\r\n          , status = arr[1];\r\n      if (status >=200 && status< 300) {\r\n        return json;\r\n      } else if (status>=400 && status<500 ){\r\n        const { message } = json;\r\n        throw new Error(`${MSG.HTTP_STATUS}: ${status}. ${message}`);\r\n      } else {\r\n        throw new Error(`${MSG.HTTP_STATUS}: ${status}`);\r\n      }\r\n    })\r\n    .catch(err => {\r\n      const { message='' } = err;\r\n      if (message.indexOf(MSG.HTTP_STATUS) !== -1) {\r\n        throw new Error(message);\r\n      }\r\n      throw new Error(`${MSG.NETWORK} ${message}`);\r\n    })\r\n};\r\n\r\n\r\nexport default request\r\n"],"file":"request.js"}